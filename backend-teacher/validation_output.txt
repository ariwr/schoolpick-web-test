1. Setup Test Data...
2025-12-26 18:50:41,613 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-12-26 18:50:41,613 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-12-26 18:50:41,630 INFO sqlalchemy.engine.Engine select current_schema()
2025-12-26 18:50:41,630 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-12-26 18:50:41,653 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-12-26 18:50:41,653 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-12-26 18:50:41,670 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-26 18:50:41,673 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.name AS users_name, users.phone AS users_phone, users.birth_date AS users_birth_date, users.user_type AS users_user_type, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-12-26 18:50:41,673 INFO sqlalchemy.engine.Engine [generated in 0.00019s] {'email_1': 'validator_test@test.com', 'param_1': 1}
2025-12-26 18:50:41,692 INFO sqlalchemy.engine.Engine INSERT INTO schedule_metadata (version_name, description, is_active, is_published, updated_at) VALUES (%(version_name)s, %(description)s, %(is_active)s, %(is_published)s, %(updated_at)s) RETURNING schedule_metadata.id, schedule_metadata.created_at
2025-12-26 18:50:41,693 INFO sqlalchemy.engine.Engine [generated in 0.00027s] {'version_name': 'ValidatorTest', 'description': None, 'is_active': False, 'is_published': False, 'updated_at': None}
2025-12-26 18:50:41,703 INFO sqlalchemy.engine.Engine COMMIT
2025-12-26 18:50:41,732 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-26 18:50:41,733 INFO sqlalchemy.engine.Engine SELECT schedule_metadata.id, schedule_metadata.version_name, schedule_metadata.description, schedule_metadata.is_active, schedule_metadata.is_published, schedule_metadata.created_at, schedule_metadata.updated_at 
FROM schedule_metadata 
WHERE schedule_metadata.id = %(pk_1)s
2025-12-26 18:50:41,733 INFO sqlalchemy.engine.Engine [generated in 0.00017s] {'pk_1': 2}
   Created Schedule ID: 2
2025-12-26 18:50:41,759 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.name AS users_name, users.phone AS users_phone, users.birth_date AS users_birth_date, users.user_type AS users_user_type, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-12-26 18:50:41,759 INFO sqlalchemy.engine.Engine [generated in 0.00017s] {'pk_1': 55}
2025-12-26 18:50:41,774 INFO sqlalchemy.engine.Engine INSERT INTO subjects (name, code, user_id, department_id, required_hours, target_grade, category, required_facility_id, created_at) VALUES (%(name)s, %(code)s, %(user_id)s, %(department_id)s, %(required_hours)s, %(target_grade)s, %(category)s, %(required_facility_id)s, %(created_at)s) RETURNING subjects.id
2025-12-26 18:50:41,774 INFO sqlalchemy.engine.Engine [generated in 0.00019s] {'name': 'ValSubject', 'code': None, 'user_id': 55, 'department_id': None, 'required_hours': 2, 'target_grade': None, 'category': None, 'required_facility_id': None, 'created_at': None}
2025-12-26 18:50:41,786 INFO sqlalchemy.engine.Engine INSERT INTO teachers (user_id, teacher_number, school_id, name, owner_id, position, hire_date, is_homeroom_teacher, created_at, updated_at, certification_number, department_id, max_hours_per_week) VALUES (%(user_id)s, %(teacher_number)s, %(school_id)s, %(name)s, %(owner_id)s, %(position)s, %(hire_date)s, %(is_homeroom_teacher)s, %(created_at)s, %(updated_at)s, %(certification_number)s, %(department_id)s, %(max_hours_per_week)s) RETURNING teachers.id
2025-12-26 18:50:41,786 INFO sqlalchemy.engine.Engine [generated in 0.00025s] {'user_id': 55, 'teacher_number': 'VT1', 'school_id': None, 'name': 'ValTeacher', 'owner_id': None, 'position': '����', 'hire_date': None, 'is_homeroom_teacher': False, 'created_at': None, 'updated_at': None, 'certification_number': None, 'department_id': None, 'max_hours_per_week': 15}
2025-12-26 18:50:41,794 INFO sqlalchemy.engine.Engine COMMIT
2025-12-26 18:50:41,812 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-26 18:50:41,813 INFO sqlalchemy.engine.Engine SELECT schedule_metadata.id AS schedule_metadata_id, schedule_metadata.version_name AS schedule_metadata_version_name, schedule_metadata.description AS schedule_metadata_description, schedule_metadata.is_active AS schedule_metadata_is_active, schedule_metadata.is_published AS schedule_metadata_is_published, schedule_metadata.created_at AS schedule_metadata_created_at, schedule_metadata.updated_at AS schedule_metadata_updated_at 
FROM schedule_metadata 
WHERE schedule_metadata.id = %(pk_1)s
2025-12-26 18:50:41,813 INFO sqlalchemy.engine.Engine [generated in 0.00025s] {'pk_1': 2}
2025-12-26 18:50:41,831 INFO sqlalchemy.engine.Engine SELECT subjects.id AS subjects_id, subjects.name AS subjects_name, subjects.code AS subjects_code, subjects.user_id AS subjects_user_id, subjects.department_id AS subjects_department_id, subjects.required_hours AS subjects_required_hours, subjects.target_grade AS subjects_target_grade, subjects.category AS subjects_category, subjects.required_facility_id AS subjects_required_facility_id, subjects.created_at AS subjects_created_at 
FROM subjects 
WHERE subjects.id = %(pk_1)s
2025-12-26 18:50:41,832 INFO sqlalchemy.engine.Engine [generated in 0.00018s] {'pk_1': 1286}
2025-12-26 18:50:41,841 INFO sqlalchemy.engine.Engine SELECT teachers.id AS teachers_id, teachers.user_id AS teachers_user_id, teachers.teacher_number AS teachers_teacher_number, teachers.school_id AS teachers_school_id, teachers.name AS teachers_name, teachers.owner_id AS teachers_owner_id, teachers.position AS teachers_position, teachers.hire_date AS teachers_hire_date, teachers.is_homeroom_teacher AS teachers_is_homeroom_teacher, teachers.created_at AS teachers_created_at, teachers.updated_at AS teachers_updated_at, teachers.certification_number AS teachers_certification_number, teachers.department_id AS teachers_department_id, teachers.max_hours_per_week AS teachers_max_hours_per_week 
FROM teachers 
WHERE teachers.id = %(pk_1)s
2025-12-26 18:50:41,841 INFO sqlalchemy.engine.Engine [generated in 0.00036s] {'pk_1': 7}
2025-12-26 18:50:41,851 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.name AS users_name, users.phone AS users_phone, users.birth_date AS users_birth_date, users.user_type AS users_user_type, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-12-26 18:50:41,851 INFO sqlalchemy.engine.Engine [cached since 0.09223s ago] {'pk_1': 55}
2025-12-26 18:50:41,861 INFO sqlalchemy.engine.Engine INSERT INTO lecture_groups (schedule_id, subject_id, teacher_id, grade, class_num, total_credits, slicing_option, neis_class_code, student_count, user_id) VALUES (%(schedule_id)s, %(subject_id)s, %(teacher_id)s, %(grade)s, %(class_num)s, %(total_credits)s, %(slicing_option)s, %(neis_class_code)s, %(student_count)s, %(user_id)s) RETURNING lecture_groups.id, lecture_groups.created_at
2025-12-26 18:50:41,861 INFO sqlalchemy.engine.Engine [generated in 0.00019s] {'schedule_id': 2, 'subject_id': 1286, 'teacher_id': 7, 'grade': 1, 'class_num': None, 'total_credits': 2, 'slicing_option': None, 'neis_class_code': None, 'student_count': None, 'user_id': 55}
2025-12-26 18:50:41,868 INFO sqlalchemy.engine.Engine COMMIT
2. Create Double Booking Blocks...
2025-12-26 18:50:41,884 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-26 18:50:41,885 INFO sqlalchemy.engine.Engine SELECT lecture_groups.id AS lecture_groups_id, lecture_groups.schedule_id AS lecture_groups_schedule_id, lecture_groups.subject_id AS lecture_groups_subject_id, lecture_groups.teacher_id AS lecture_groups_teacher_id, lecture_groups.grade AS lecture_groups_grade, lecture_groups.class_num AS lecture_groups_class_num, lecture_groups.total_credits AS lecture_groups_total_credits, lecture_groups.slicing_option AS lecture_groups_slicing_option, lecture_groups.neis_class_code AS lecture_groups_neis_class_code, lecture_groups.student_count AS lecture_groups_student_count, lecture_groups.created_at AS lecture_groups_created_at, lecture_groups.user_id AS lecture_groups_user_id 
FROM lecture_groups 
WHERE lecture_groups.id = %(pk_1)s
2025-12-26 18:50:41,885 INFO sqlalchemy.engine.Engine [generated in 0.00018s] {'pk_1': 4}
2025-12-26 18:50:41,913 INFO sqlalchemy.engine.Engine INSERT INTO lecture_blocks (group_id, day, period, room_id, is_fixed) SELECT p0::INTEGER, p1::VARCHAR, p2::INTEGER, p3::INTEGER, p4::BOOLEAN FROM (VALUES (%(group_id__0)s, %(day__0)s, %(period__0)s, %(room_id__0)s, %(is_fixed__0)s, 0), (%(group_id__1)s, %(day__1)s, %(period__1)s, %(room_id__1)s, %(is_fixed__1)s, 1)) AS imp_sen(p0, p1, p2, p3, p4, sen_counter) ORDER BY sen_counter RETURNING lecture_blocks.id, lecture_blocks.created_at, lecture_blocks.id AS id__1
2025-12-26 18:50:41,913 INFO sqlalchemy.engine.Engine [generated in 0.00025s (insertmanyvalues) 1/1 (ordered)] {'room_id__0': None, 'day__0': 'MON', 'group_id__0': 4, 'period__0': 1, 'is_fixed__0': False, 'room_id__1': None, 'day__1': 'MON', 'group_id__1': 4, 'period__1': 1, 'is_fixed__1': False}
2025-12-26 18:50:41,922 INFO sqlalchemy.engine.Engine COMMIT
3. Run Validator...
2025-12-26 18:50:41,937 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-12-26 18:50:41,937 INFO sqlalchemy.engine.Engine SELECT schedule_metadata.id AS schedule_metadata_id, schedule_metadata.version_name AS schedule_metadata_version_name, schedule_metadata.description AS schedule_metadata_description, schedule_metadata.is_active AS schedule_metadata_is_active, schedule_metadata.is_published AS schedule_metadata_is_published, schedule_metadata.created_at AS schedule_metadata_created_at, schedule_metadata.updated_at AS schedule_metadata_updated_at 
FROM schedule_metadata 
WHERE schedule_metadata.id = %(pk_1)s
2025-12-26 18:50:41,937 INFO sqlalchemy.engine.Engine [cached since 0.1245s ago] {'pk_1': 2}
2025-12-26 18:50:41,955 INFO sqlalchemy.engine.Engine SELECT lecture_blocks.id AS lecture_blocks_id, lecture_blocks.group_id AS lecture_blocks_group_id, lecture_blocks.day AS lecture_blocks_day, lecture_blocks.period AS lecture_blocks_period, lecture_blocks.room_id AS lecture_blocks_room_id, lecture_blocks.is_fixed AS lecture_blocks_is_fixed, lecture_blocks.created_at AS lecture_blocks_created_at 
FROM lecture_blocks JOIN lecture_groups ON lecture_groups.id = lecture_blocks.group_id 
WHERE lecture_groups.schedule_id = %(schedule_id_1)s
2025-12-26 18:50:41,955 INFO sqlalchemy.engine.Engine [generated in 0.00023s] {'schedule_id_1': 2}
2025-12-26 18:50:41,965 INFO sqlalchemy.engine.Engine SELECT teacher_time_offs.id AS teacher_time_offs_id, teacher_time_offs.user_id AS teacher_time_offs_user_id, teacher_time_offs.teacher_id AS teacher_time_offs_teacher_id, teacher_time_offs.day AS teacher_time_offs_day, teacher_time_offs.period AS teacher_time_offs_period, teacher_time_offs.reason AS teacher_time_offs_reason, teacher_time_offs.created_at AS teacher_time_offs_created_at 
FROM teacher_time_offs
2025-12-26 18:50:41,965 INFO sqlalchemy.engine.Engine [generated in 0.00019s] {}
2025-12-26 18:50:41,974 INFO sqlalchemy.engine.Engine SELECT lecture_groups.id AS lecture_groups_id, lecture_groups.schedule_id AS lecture_groups_schedule_id, lecture_groups.subject_id AS lecture_groups_subject_id, lecture_groups.teacher_id AS lecture_groups_teacher_id, lecture_groups.grade AS lecture_groups_grade, lecture_groups.class_num AS lecture_groups_class_num, lecture_groups.total_credits AS lecture_groups_total_credits, lecture_groups.slicing_option AS lecture_groups_slicing_option, lecture_groups.neis_class_code AS lecture_groups_neis_class_code, lecture_groups.student_count AS lecture_groups_student_count, lecture_groups.created_at AS lecture_groups_created_at, lecture_groups.user_id AS lecture_groups_user_id 
FROM lecture_groups 
WHERE lecture_groups.id = %(pk_1)s
2025-12-26 18:50:41,975 INFO sqlalchemy.engine.Engine [cached since 0.09033s ago] {'pk_1': 4}
   Is Valid: False
   Errors: 1
   - DOUBLE_BOOKING_TEACHER: Teacher 7 is double booked at MON period 1
4. Cleanup...
2025-12-26 18:50:41,988 INFO sqlalchemy.engine.Engine DELETE FROM lecture_blocks WHERE lecture_blocks.group_id = %(group_id_1)s
2025-12-26 18:50:41,988 INFO sqlalchemy.engine.Engine [generated in 0.00029s] {'group_id_1': 4}
2025-12-26 18:50:41,997 INFO sqlalchemy.engine.Engine DELETE FROM lecture_groups WHERE lecture_groups.id = %(id_1)s
2025-12-26 18:50:41,997 INFO sqlalchemy.engine.Engine [generated in 0.00027s] {'id_1': 4}
2025-12-26 18:50:42,007 INFO sqlalchemy.engine.Engine DELETE FROM schedule_metadata WHERE schedule_metadata.id = %(id_1)s
2025-12-26 18:50:42,007 INFO sqlalchemy.engine.Engine [generated in 0.00022s] {'id_1': 2}
2025-12-26 18:50:42,017 INFO sqlalchemy.engine.Engine COMMIT
